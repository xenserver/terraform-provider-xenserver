---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "xenserver_vdi Resource - xenserver"
subcategory: ""
description: |-
  Provides a virtual disk image resource.
---

# xenserver_vdi (Resource)

Provides a virtual disk image resource.

## Example Usage

```terraform
# Create a VDI with a new SR
resource "xenserver_sr_nfs" "nfs" {
  name_label       = "Test NFS SR"
  name_description = "A test NFS storage repository"
  version          = "3"
  storage_location = "192.0.2.1:/server/path"
}

resource "xenserver_vdi" "vdi" {
  name_label       = "Test VDI"
  name_description = "A test VDI on NFS SR"
  sr_uuid          = xenserver_sr_nfs.nfs.uuid
  virtual_size     = 1 * 1024 * 1024 * 1024
  sharable         = true
  other_config = {
    "flag" = "1"
  }
}

# Create a VDI with an exist SR
data "xenserver_sr" "sr" {
  name_label = "Local storage"
}

resource "xenserver_vdi" "vdi" {
  name_label       = "Test VDI"
  name_description = "A test VDI on Local storage"
  sr_uuid          = data.xenserver_sr.sr.data_items[0].uuid
  virtual_size     = 1 * 1024 * 1024 * 1024
  read_only        = true
  type             = "system"
}

resource "xenserver_vdi" "import_vdi" {
  name_label   = "Import VDI"
  sr_uuid      = data.xenserver_sr.sr.data_items[0].uuid
  raw_vdi_path = "/tmp/livecd.ubuntu-cpc.azure.vhd"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name_label` (String) The name of the virtual disk image.
- `sr_uuid` (String) The UUID of the storage repository used.

-> **Note:** `sr_uuid` is not allowed to be updated.

### Optional

- `name_description` (String) The description of the virtual disk image, default to be `""`.
- `other_config` (Map of String) The additional configuration of the virtual disk image, default to be `{}`.
- `raw_vdi_path` (String) The file path to the raw disk image (VDI), compatible with "Raw", "Tar", "VHD" formats.

-> **Note:**

 1. `raw_vdi_path` is required if `virtual_size` is not set. 2. `raw_vdi_path` is not allowed to be updated. 3. If `raw_vdi_path` is set, `virtual_size` will be ignored. 4. If `raw_vdi_path` is set, `type` will be `user`, `sharable` and `read_only` will be `false`.
- `read_only` (Boolean) True if this SR is (capable of being) shared between multiple hosts, default to be `false`.

-> **Note:** `read_only` is not allowed to be updated.
- `sharable` (Boolean) True if this disk may be shared, default to be `false`.

-> **Note:** `sharable` is not allowed to be updated.
- `type` (String) The type of the virtual disk image, default to be `"user"`.

-> **Note:** `type` is not allowed to be updated.
- `virtual_size` (Number) The size of virtual disk image (in bytes).

-> **Note:**

 1. `virtual_size` is required if `raw_vdi_path` is not set. 2. `virtual_size` is not allowed to be updated.

### Read-Only

- `id` (String) The test ID of the virtual disk image.
- `uuid` (String) The UUID of the virtual disk image.

## Import

Import is supported using the following syntax:

```shell
terraform import xenserver_vdi.vdi 00000000-0000-0000-0000-000000000000
```
